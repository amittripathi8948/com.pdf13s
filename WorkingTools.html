<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§Ö‡§≤‡•ç‡§ü‡•Ä‡§Æ‡•á‡§ü ‡§ü‡•Ç‡§≤‡•ç‡§∏ - 100% ‡§µ‡§∞‡•ç‡§ï‡§ø‡§Ç‡§ó ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§ü‡•Ç‡§≤‡•ç‡§∏</title>
    <meta name="description" content="‡§∏‡§≠‡•Ä PDF ‡§î‡§∞ ‡§Ø‡•Ç‡§ü‡§ø‡§≤‡§ø‡§ü‡•Ä ‡§ü‡•Ç‡§≤‡•ç‡§∏ ‡§ú‡•ã ‡§µ‡§æ‡§∏‡•ç‡§§‡§µ ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§´‡•ã‡§ü‡•ã ‡§∏‡•á PDF ‡§¨‡§®‡§æ‡§è‡§Ç, ‡§á‡§Æ‡•á‡§ú ‡§ï‡§Ç‡§™‡•ç‡§∞‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§ 100% ‡§ï‡•ç‡§≤‡§æ‡§á‡§Ç‡§ü-‡§∏‡§æ‡§á‡§°, ‡§§‡•á‡§ú ‡§î‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§">
    <meta name="keywords" content="photo to pdf, image compressor, online tools, karan, amit tripathi, 100% working tools">
    
    <!-- PWA Manifest Link -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">

    <!-- Icons and Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script>
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js`;
        }
    </script>

    <style>
        :root {
            --primary-color: #3498db; --secondary-color: #e74c3c; --background-color: #f4f6f9;
            --card-background: #ffffff; --text-color: #34495e; --heading-color: #2c3e50;
            --border-color: #dfe4ea; --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            --gradient: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        .dark-mode {
            --background-color: #2c3e50; --card-background: #34495e; --text-color: #f4f6f9;
            --heading-color: #ffffff; --border-color: #576574;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', 'Roboto', sans-serif; scroll-behavior: smooth; }
        body { background-color: var(--background-color); color: var(--text-color); transition: background-color 0.3s, color 0.3s; display: flex; }
        
        .sidebar { width: 260px; background-color: var(--card-background); height: 100vh; position: fixed; top: 0; left: 0; padding: 20px; display: flex; flex-direction: column; border-right: 1px solid var(--border-color); z-index: 1000; transition: transform 0.3s ease-in-out; }
        .sidebar .logo { font-size: 2em; font-weight: bold; color: var(--heading-color); margin-bottom: 30px; text-align: center; }
        .sidebar .logo i { color: var(--primary-color); }
        .sidebar nav a { display: flex; align-items: center; color: var(--text-color); text-decoration: none; padding: 15px 20px; margin-bottom: 10px; border-radius: 8px; transition: all 0.3s; }
        .sidebar nav a:hover, .sidebar nav a.active { background: var(--gradient); color: white; transform: translateX(5px); }
        .sidebar nav a i { margin-right: 15px; width: 20px; text-align: center; }
        .sidebar .bottom-links { margin-top: auto; }
        .sidebar .theme-switcher, .sidebar .about-link, .sidebar .instagram-link { display: flex; align-items: center; justify-content: space-between; padding: 10px; background-color: var(--background-color); border-radius: 8px; margin-top: 10px; text-decoration:none; color: var(--text-color); cursor:pointer;}
        .sidebar .instagram-link img { width: 24px; height: 24px; margin-right: 10px; }

        .main-content { margin-left: 260px; width: calc(100% - 260px); padding: 40px; transition: margin-left 0.3s ease-in-out; }
        .header-banner { background: var(--gradient); padding: 50px 40px; border-radius: 16px; text-align: center; color: white; margin-bottom: 40px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); }
        
        .tool-section h2 { font-size: 2.2em; color: var(--heading-color); margin-bottom: 25px; padding-bottom: 10px; border-bottom: 4px solid var(--primary-color); display: inline-block; }
        .tool-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px; }
        .tool-card { background: var(--card-background); padding: 25px; border-radius: 12px; box-shadow: var(--shadow); text-align: center; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s; border: 1px solid var(--border-color); display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .tool-card:hover { transform: translateY(-8px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15); border-color: var(--primary-color); }
        .tool-card .icon { font-size: 3em; margin-bottom: 15px; color: var(--primary-color); }
        .tool-card h3 { font-size: 1.2em; color: var(--heading-color); margin-bottom: 5px; }
        .tool-card p { font-size: 0.9em; color: var(--text-color); opacity: 0.8; }
        
        footer { text-align: center; padding: 20px; margin-top: 40px; color: var(--text-color); border-top: 1px solid var(--border-color); }
        .modal-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s; }
        .modal-container.show { opacity: 1; visibility: visible; }
        .modal-content { background: var(--card-background); padding: 30px; border-radius: 15px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto; position: relative; transform: scale(0.95); transition: transform 0.3s; }
        
        .tool-ui input, .tool-ui textarea, .tool-ui select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 15px; background-color: var(--background-color); color: var(--text-color); }
        .tool-ui .btn { background: var(--gradient); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: bold; transition: opacity 0.3s; display: inline-block; text-decoration: none; text-align: center; }
        .loading-spinner { border: 5px solid var(--border-color); border-top: 5px solid var(--primary-color); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 20px auto; display: none; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #output-area { margin-top: 20px; padding: 15px; background: var(--background-color); border-radius: 8px; border: 1px solid var(--border-color); min-height: 50px; word-wrap: break-word; }
        #output-area img { max-width: 100%; border-radius: 8px; margin-top: 10px; }

        .menu-toggle { display: none; position: fixed; top: 15px; left: 15px; z-index: 1100; background: var(--card-background); border: 1px solid var(--border-color); border-radius: 50%; width: 50px; height: 50px; font-size: 1.5rem; color: var(--heading-color); cursor: pointer; }
        #install-app-btn { background: var(--gradient); color: white; position: fixed; bottom: 20px; right: 20px; z-index: 1001; padding: 10px 20px; border-radius: 50px; border: none; cursor: pointer; font-weight: bold; display: none; }
        @media (max-width: 992px) {
            .sidebar { transform: translateX(-100%); }
            body.sidebar-open .sidebar { transform: translateX(0); }
            .main-content { margin-left: 0; width: 100%; padding: 20px; }
            .menu-toggle { display: flex; align-items: center; justify-content: center; }
        }
    </style>
</head>
<body class="sidebar-open">

    <aside class="sidebar">
        <div class="logo"><i class="fas fa-check-circle"></i> UltimateTools</div>
        <nav>
            <a href="#home" class="active"><i class="fas fa-home"></i> ‡§π‡•ã‡§Æ</a>
            <a href="#pdf-tools"><i class="fas fa-file-pdf"></i> PDF ‡§ü‡•Ç‡§≤‡•ç‡§∏</a>
            <a href="#utility-tools"><i class="fas fa-cogs"></i> ‡§Ø‡•Ç‡§ü‡§ø‡§≤‡§ø‡§ü‡•Ä ‡§ü‡•Ç‡§≤‡•ç‡§∏</a>
        </nav>
        <div class="bottom-links">
            <div class="theme-switcher"><span>‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§°</span><input type="checkbox" id="theme-toggle-checkbox"></div>
            <a href="#" class="about-link" id="about-us-btn"><i class="fas fa-info-circle"></i> About Us</a>
            <a href="https://www.instagram.com/its_amit_tripathi_r?igsh=MTR5ZmR6ZjVjaG04ZQ==" target="_blank" class="instagram-link"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram Logo"><span>Follow Me</span></a>
        </div>
    </aside>

    <button class="menu-toggle"><i class="fas fa-bars"></i></button>
    <button id="install-app-btn"><i class="fas fa-download"></i> ‡§ê‡§™ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</button>

    <main class="main-content">
        <header class="header-banner" id="home">
            <h1>100% ‡§µ‡§∞‡•ç‡§ï‡§ø‡§Ç‡§ó ‡§ë‡§®‡§≤‡§æ‡§á‡§® ‡§ü‡•Ç‡§≤‡•ç‡§∏</h1>
            <p>‡§Ü‡§™‡§ï‡•á ‡§∏‡§≠‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§∂‡§ï‡•ç‡§§‡§ø‡§∂‡§æ‡§≤‡•Ä, ‡§§‡•á‡§ú ‡§î‡§∞ ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π ‡§∏‡•á ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®‡§≤ ‡§ü‡•Ç‡§≤‡§ï‡§ø‡§ü‡•§</p>
        </header>

        <section class="tool-section" id="pdf-tools">
            <h2><i class="fas fa-file-pdf"></i> PDF ‡§ü‡•Ç‡§≤‡•ç‡§∏ (‡§∏‡§≠‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®‡§≤)</h2>
            <div class="tool-grid">
                <div class="tool-card" data-tool="photo-to-pdf"> <div class="icon"><i class="fas fa-file-image"></i></div> <h3>‡§´‡•ã‡§ü‡•ã ‡§∏‡•á PDF</h3> <p>JPG/PNG ‡§á‡§Æ‡•á‡§ú‡§ø‡§∏ ‡§ï‡•ã ‡§è‡§ï PDF ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="pdf-merge"> <div class="icon"><i class="fas fa-compress-arrows-alt"></i></div> <h3>PDF ‡§Æ‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç</h3> <p>‡§ï‡§à PDF ‡§´‡§º‡§æ‡§á‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§è‡§ï ‡§Æ‡•á‡§Ç ‡§ú‡•ã‡§°‡§º‡•á‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="pdf-split"> <div class="icon"><i class="fas fa-columns"></i></div> <h3>PDF ‡§∏‡•ç‡§™‡•ç‡§≤‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</h3> <p>‡§è‡§ï PDF ‡§∏‡•á ‡§™‡•á‡§ú ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç ‡§Ø‡§æ ‡§Ö‡§≤‡§ó ‡§ï‡§∞‡•á‡§Ç‡•§</p> </div>
                 <div class="tool-card" data-tool="pdf-to-jpg"> <div class="icon"><i class="fas fa-file-export"></i></div> <h3>PDF ‡§∏‡•á JPG</h3> <p>PDF ‡§ï‡•á ‡§π‡§∞ ‡§™‡•á‡§ú ‡§ï‡•ã ‡§è‡§ï ‡§á‡§Æ‡•á‡§ú ‡§¨‡§®‡§æ‡§è‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="rotate-pdf"> <div class="icon"><i class="fas fa-sync-alt"></i></div> <h3>PDF ‡§∞‡•ã‡§ü‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</h3> <p>PDF ‡§ï‡•á ‡§™‡•á‡§ú‡•ã‡§Ç ‡§ï‡•ã ‡§ò‡•Å‡§Æ‡§æ‡§è‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="add-page-numbers"> <div class="icon"><i class="fas fa-sort-numeric-down"></i></div> <h3>‡§™‡•á‡§ú ‡§®‡§Ç‡§¨‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</h3> <p>PDF ‡§Æ‡•á‡§Ç ‡§™‡•á‡§ú ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç‡•§</p> </div>
            </div>
        </section>

        <section class="tool-section" id="utility-tools">
            <h2><i class="fas fa-cogs"></i> ‡§Ø‡•Ç‡§ü‡§ø‡§≤‡§ø‡§ü‡•Ä ‡§ü‡•Ç‡§≤‡•ç‡§∏ (‡§∏‡§≠‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®‡§≤)</h2>
            <div class="tool-grid">
                <div class="tool-card" data-tool="image-compressor"> <div class="icon"><i class="fas fa-image"></i></div> <h3>‡§á‡§Æ‡•á‡§ú ‡§ï‡§Ç‡§™‡•ç‡§∞‡•á‡§∏‡§∞</h3> <p>JPG/PNG ‡§á‡§Æ‡•á‡§ú ‡§ï‡§æ ‡§∏‡§æ‡§á‡§ú ‡§ò‡§ü‡§æ‡§è‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="image-converter"> <div class="icon"><i class="fas fa-retweet"></i></div> <h3>‡§á‡§Æ‡•á‡§ú ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü‡§∞</h3> <p>JPG ‚Üî PNG ‚Üî WEBP ‡§Æ‡•á‡§Ç ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="password-generator"> <div class="icon"><i class="fas fa-key"></i></div> <h3>‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§ú‡•á‡§®‡§∞‡•á‡§ü‡§∞</h3> <p>‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§î‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="word-counter"> <div class="icon"><i class="fas fa-file-word"></i></div> <h3>‡§∂‡§¨‡•ç‡§¶ ‡§ó‡§£‡§ï</h3> <p>‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§Æ‡•á‡§Ç ‡§∂‡§¨‡•ç‡§¶ ‡§î‡§∞ ‡§Ö‡§ï‡•ç‡§∑‡§∞ ‡§ó‡§ø‡§®‡•á‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="age-calculator"> <div class="icon"><i class="fas fa-birthday-cake"></i></div> <h3>‡§Ü‡§Ø‡•Å ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h3> <p>‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø ‡§∏‡•á ‡§Ö‡§™‡§®‡•Ä ‡§â‡§Æ‡•ç‡§∞ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="bmi-calculator"> <div class="icon"><i class="fas fa-weight"></i></div> <h3>BMI ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞</h3> <p>‡§¨‡•â‡§°‡•Ä ‡§Æ‡§æ‡§∏ ‡§á‡§Ç‡§°‡•á‡§ï‡•ç‡§∏ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§</p> </div>
                <div class="tool-card" data-tool="notes"> <div class="icon"><i class="fas fa-sticky-note"></i></div> <h3>‡§®‡•ã‡§ü‡•ç‡§∏</h3> <p>‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§¨‡§®‡§æ‡§è‡§Ç‡•§</p> </div>
            </div>
        </section>

        <footer><p>¬© <span id="copyright-year"></span> UltimateTools. All Rights Reserved. Created with üòà by Amittripathi My favorite  RCB KING VIRAT KOHLI üòá.</p></footer>
    </main>

    <div id="modal-container" class="modal-container">
        <div class="modal-content"><div class="modal-header"><h2 id="modal-title"></h2><button class="modal-close-btn">√ó</button></div><div class="modal-body"><div id="tool-ui" class="tool-ui"></div><div class="loading-spinner" id="loading-spinner"></div><div id="output-area"></div></div></div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Library Initialization ---
    const { PDFDocument } = PDFLib;

    // --- DOM Elements ---
    const body = document.body;
    const modalContainer = document.getElementById('modal-container');
    const modalTitle = document.getElementById('modal-title');
    const toolUiContainer = document.getElementById('tool-ui');
    const outputArea = document.getElementById('output-area');
    const loadingSpinner = document.getElementById('loading-spinner');
    const installBtn = document.getElementById('install-app-btn');
    let deferredPrompt;

    // --- Helper Functions ---
    const showLoading = () => { loadingSpinner.style.display = 'block'; outputArea.innerHTML = ''; };
    const hideLoading = () => { loadingSpinner.style.display = 'none'; };
    const showOutput = (content) => { outputArea.innerHTML = content; };
    const createDownloadLink = (data, fileName, linkText) => {
        const blob = new Blob([data]);
        const url = URL.createObjectURL(blob);
        return `<a href="${url}" download="${fileName}" class="btn">${linkText}</a>`;
    };

    // --- Core App Logic: Setup all event listeners on page load ---
    const setupEventListeners = () => {
        document.getElementById('copyright-year').textContent = new Date().getFullYear();
        
        const themeToggle = document.getElementById('theme-toggle-checkbox');
        if (localStorage.getItem('theme') === 'dark') { body.classList.add('dark-mode'); themeToggle.checked = true; }
        themeToggle.addEventListener('change', () => {
            body.classList.toggle('dark-mode');
            localStorage.setItem('theme', body.classList.contains('dark-mode') ? 'dark' : 'light');
        });

        document.querySelector('.menu-toggle').addEventListener('click', () => body.classList.toggle('sidebar-open'));
        modalContainer.querySelector('.modal-close-btn').addEventListener('click', () => modalContainer.classList.remove('show'));
        modalContainer.addEventListener('click', (e) => { if (e.target === modalContainer) modalContainer.classList.remove('show'); });

        document.querySelectorAll('.tool-card').forEach(card => card.addEventListener('click', (e) => {
            e.preventDefault();
            openModal(card.querySelector('h3').textContent, card.dataset.tool);
        }));
        document.getElementById('about-us-btn').addEventListener('click', () => openModal("About Us", 'about-us'));
        
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });
        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                await deferredPrompt.userChoice;
                deferredPrompt = null;
                installBtn.style.display = 'none';
            }
        });
    };

    // --- Function to open a tool's modal ---
    const openModal = (title, toolId) => {
        modalTitle.textContent = title;
        hideLoading();
        outputArea.innerHTML = '';
        toolUiContainer.innerHTML = getToolUI(toolId);
        bindToolLogic(toolId);
        modalContainer.classList.add('show');
    };

    // --- Function to get the HTML for a tool's UI ---
    const getToolUI = (toolId) => {
        const fileInputHtml = (accept, multiple = false) => `<p>‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡•Ä ‡§´‡§º‡§æ‡§á‡§≤(‡§≤‡•á‡§Ç) ‡§ö‡•Å‡§®‡•á‡§Ç‡•§</p><input type="file" id="file-input" accept="${accept}" ${multiple ? 'multiple' : ''}><button class="btn" id="process-btn">‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç</button>`;
        switch(toolId) {
            case 'about-us': return `<div style="text-align: center; font-size: 1.1em;"><p>‡§Ø‡§π ‡§µ‡•á‡§¨‡§∏‡§æ‡§á‡§ü <b>Karan</b> ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¨‡§®‡§æ‡§à ‡§ó‡§à ‡§π‡•à‡•§</p><br><a href="https://www.instagram.com/its_amit_tripathi_r?igsh=MTR5ZmR6ZjVjaG04ZQ==" target="_blank" style="display: inline-flex; align-items: center; gap: 10px; text-decoration: none; color: var(--primary-color);"><img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" style="width: 28px;"><strong>Follow Amit Tripathi</strong></a></div>`;
            case 'pdf-merge': return fileInputHtml('.pdf', true);
            case 'photo-to-pdf': return fileInputHtml('image/jpeg,image/png', true);
            case 'pdf-to-jpg': return fileInputHtml('.pdf');
            case 'pdf-split': return `<p>‡§è‡§ï PDF ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§™‡•á‡§ú ‡§∞‡•á‡§Ç‡§ú ‡§¨‡§§‡§æ‡§è‡§Ç (‡§â‡§¶‡§æ. 1-3, 5)‡•§</p><input type="file" id="file-input" accept=".pdf"><input type="text" id="split-ranges" placeholder="‡§ú‡•à‡§∏‡•á: 1-3, 5, 8-10"><button class="btn" id="process-btn">‡§∏‡•ç‡§™‡•ç‡§≤‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç</button>`;
            case 'rotate-pdf': return `<p>PDF ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§∞‡•ã‡§ü‡•á‡§∂‡§® ‡§è‡§Ç‡§ó‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§</p><input type="file" id="file-input" accept=".pdf"><select id="rotate-angle"><option value="90">90¬∞</option><option value="180">180¬∞</option><option value="270">270¬∞</option></select><button class="btn" id="process-btn">‡§∞‡•ã‡§ü‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>`;
            case 'add-page-numbers': return `<p>PDF ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç‡•§</p><input type="file" id="file-input" accept=".pdf"><select id="position"><option value="bottom-center">‡§®‡•Ä‡§ö‡•á ‡§¨‡•Ä‡§ö ‡§Æ‡•á‡§Ç</option></select><button class="btn" id="process-btn">‡§®‡§Ç‡§¨‡§∞ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>`;
            case 'image-compressor': return `<p>‡§á‡§Æ‡•á‡§ú ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§ï‡§Ç‡§™‡•ç‡§∞‡•á‡§∂‡§® ‡§ï‡•ç‡§µ‡§æ‡§≤‡§ø‡§ü‡•Ä ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§</p><input type="file" id="file-input" accept="image/jpeg,image/png"><label for="img-quality">‡§ï‡•ç‡§µ‡§æ‡§≤‡§ø‡§ü‡•Ä (0.1-1.0): <span id="quality-val">0.7</span></label><input type="range" id="img-quality" min="0.1" max="1" step="0.1" value="0.7"><button class="btn" id="process-btn">‡§ï‡§Ç‡§™‡•ç‡§∞‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç</button>`;
            case 'image-converter': return `<p>‡§è‡§ï ‡§á‡§Æ‡•á‡§ú ‡§ö‡•Å‡§®‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§â‡§ü‡§™‡•Å‡§ü ‡§´‡•â‡§∞‡•ç‡§Æ‡•á‡§ü ‡§ö‡•Å‡§®‡•á‡§Ç‡•§</p><input type="file" id="file-input" accept="image/jpeg,image/png,image/webp"><select id="convert-format"><option value="image/jpeg">JPG</option><option value="image/png">PNG</option><option value="image/webp">WEBP</option></select><button class="btn" id="process-btn">‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç</button>`;
            case 'password-generator': return `<label for="pw-length">‡§≤‡§Ç‡§¨‡§æ‡§à: <span id="pw-length-val">16</span></label><input type="range" id="pw-length" min="8" max="32" value="16"><br><input type="checkbox" id="pw-symbols" checked> ‡§∏‡§ø‡§Ç‡§¨‡§≤ (!@#) <input type="checkbox" id="pw-numbers" checked> ‡§®‡§Ç‡§¨‡§∞ (0-9)<br><br><button class="btn" id="process-btn">‡§®‡§Ø‡§æ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç</button>`;
            case 'word-counter': return `<p>‡§ü‡•á‡§ï‡•ç‡§∏‡•ç‡§ü ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç‡•§</p><textarea id="word-count-text" rows="8"></textarea>`;
            case 'age-calculator': return `<p>‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø ‡§ö‡•Å‡§®‡•á‡§Ç‡•§</p><input type="date" id="birth-date"><button class="btn" id="process-btn">‡§â‡§Æ‡•ç‡§∞ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>`;
            case 'bmi-calculator': return `<p>‡§µ‡§ú‡§® (kg) ‡§î‡§∞ ‡§ä‡§Ç‡§ö‡§æ‡§à (cm) ‡§°‡§æ‡§≤‡•á‡§Ç‡•§</p><input type="number" id="bmi-weight" placeholder="‡§µ‡§ú‡§® (kg)"><input type="number" id="bmi-height" placeholder="‡§ä‡§Ç‡§ö‡§æ‡§à (cm)"><button class="btn" id="process-btn">BMI ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç</button>`;
            case 'notes': return `<p>‡§Ü‡§™‡§ï‡•á ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§ë‡§ü‡•ã-‡§∏‡•á‡§µ ‡§π‡•ã ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§</p><textarea id="notes-area" rows="10"></textarea>`;
            default: return `<p>‡§Ø‡§π ‡§ü‡•Ç‡§≤ ‡§ú‡§≤‡•ç‡§¶ ‡§π‡•Ä ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à!</p>`;
        }
    };
    
    // --- Function to bind the JavaScript logic to the tool's UI ---
    const bindToolLogic = (toolId) => {
        const processBtn = document.getElementById('process-btn');
        if (!processBtn) { // For tools without a button
            if (toolId === 'notes') {
                const notesArea = document.getElementById('notes-area');
                notesArea.value = localStorage.getItem('user-notes') || '';
                notesArea.addEventListener('input', () => localStorage.setItem('user-notes', notesArea.value));
            }
            if (toolId === 'word-counter') {
                 document.getElementById('word-count-text').addEventListener('input', e => showOutput(`<b>‡§∂‡§¨‡•ç‡§¶:</b> ${e.target.value.match(/\b\w+\b/g)?.length || 0} | <b>‡§Ö‡§ï‡•ç‡§∑‡§∞:</b> ${e.target.value.length}`));
            }
            return;
        }

        processBtn.addEventListener('click', async () => {
            const fileInput = document.getElementById('file-input');
            if (fileInput && fileInput.files.length === 0) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§´‡§º‡§æ‡§á‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§');
                return;
            }
            showLoading();
            try {
                switch (toolId) {
                    case 'image-compressor': {
                        const file = fileInput.files[0];
                        const quality = parseFloat(document.getElementById('img-quality').value);
                        const reader = new FileReader();
                        reader.readAsDataURL(file);
                        reader.onload = e => {
                            const img = new Image();
                            img.src = e.target.result;
                            img.onload = () => {
                                const canvas = document.createElement('canvas');
                                canvas.width = img.width; canvas.height = img.height;
                                const ctx = canvas.getContext('2d');
                                ctx.drawImage(img, 0, 0);
                                const dataUrl = canvas.toDataURL('image/jpeg', quality);
                                const originalSize = (file.size / 1024).toFixed(2);
                                const newSize = (atob(dataUrl.split(',')[1]).length / 1024).toFixed(2);
                                showOutput(`<p>‡§ì‡§∞‡§ø‡§ú‡§ø‡§®‡§≤: <b>${originalSize}KB</b> | ‡§ï‡§Ç‡§™‡•ç‡§∞‡•á‡§∏‡•ç‡§°: <b>${newSize}KB</b></p><img src="${dataUrl}"/><br>${createDownloadLink(dataUrl, `compressed-${file.name.split('.')[0]}.jpg`, '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç')}`);
                                hideLoading();
                            };
                        };
                        break;
                    }
                    case 'photo-to-pdf': {
                        const pdfDoc = await PDFDocument.create();
                        for (const file of fileInput.files) {
                            const imgBytes = await file.arrayBuffer();
                            const image = file.type === 'image/png' ? await pdfDoc.embedPng(imgBytes) : await pdfDoc.embedJpg(imgBytes);
                            const page = pdfDoc.addPage([image.width, image.height]);
                            page.drawImage(image, { x: 0, y: 0, width: image.width, height: image.height });
                        }
                        const pdfBytes = await pdfDoc.save();
                        showOutput(createDownloadLink(pdfBytes, 'Photos.pdf', '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° PDF'));
                        break;
                    }
                    case 'pdf-merge': {
                        if (fileInput.files.length < 2) { alert('‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§¶‡•ã PDF ‡§ö‡•Å‡§®‡•á‡§Ç‡•§'); break; }
                        const mergedPdf = await PDFDocument.create();
                        for (const file of fileInput.files) {
                            const pdfBytes = await file.arrayBuffer();
                            const pdfDoc = await PDFDocument.load(pdfBytes, { ignoreEncryption: true });
                            const copiedPages = await mergedPdf.copyPages(pdfDoc, pdfDoc.getPageIndices());
                            copiedPages.forEach(page => mergedPdf.addPage(page));
                        }
                        const pdfBytes = await mergedPdf.save();
                        showOutput(createDownloadLink(pdfBytes, 'Merged.pdf', '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§Æ‡§∞‡•ç‡§ú ‡§ï‡•Ä ‡§ó‡§à PDF'));
                        break;
                    }
                    case 'pdf-to-jpg': {
                        if (!window.pdfjsLib) { alert('PDF library ‡§≤‡•ã‡§° ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§à‡•§'); break; }
                        const arrayBuffer = await fileInput.files[0].arrayBuffer();
                        const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
                        let linksHtml = '';
                        for (let i = 1; i <= pdf.numPages; i++) {
                            const page = await pdf.getPage(i);
                            const viewport = page.getViewport({ scale: 1.5 });
                            const canvas = document.createElement('canvas');
                            canvas.height = viewport.height; canvas.width = viewport.width;
                            await page.render({ canvasContext: canvas.getContext('2d'), viewport }).promise;
                            const dataUrl = canvas.toDataURL('image/jpeg');
                            linksHtml += `<a href="${dataUrl}" download="page-${i}.jpg" class="btn" style="margin:5px;">‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§™‡•á‡§ú ${i}</a>`;
                        }
                        showOutput(linksHtml);
                        break;
                    }
                    case 'pdf-split': {
                         const ranges = document.getElementById('split-ranges').value;
                         if (!ranges) { alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•á‡§ú ‡§∞‡•á‡§Ç‡§ú ‡§°‡§æ‡§≤‡•á‡§Ç‡•§'); break; }
                         const pageNumbers = ranges.split(',').flatMap(r => {
                            if(r.includes('-')) {
                                const [start, end] = r.split('-').map(Number);
                                return Array.from({length: end-start+1}, (_, i) => start+i-1);
                            }
                            return Number(r)-1;
                         });
                         const pdfBytes = await fileInput.files[0].arrayBuffer();
                         const pdfDoc = await PDFDocument.load(pdfBytes, {ignoreEncryption: true});
                         const newDoc = await PDFDocument.create();
                         const copied = await newDoc.copyPages(pdfDoc, pageNumbers);
                         copied.forEach(p => newDoc.addPage(p));
                         const newBytes = await newDoc.save();
                         showOutput(createDownloadLink(newBytes, 'Split.pdf', '‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§∏‡•ç‡§™‡•ç‡§≤‡§ø‡§ü PDF'));
                         break;
                    }
                    case 'password-generator': {
                        const length = document.getElementById('pw-length').value;
                        const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ' + (document.getElementById('pw-numbers').checked ? '0123456789' : '') + (document.getElementById('pw-symbols').checked ? '!@#$%^&*()' : '');
                        let password = '';
                        for (let i = 0; i < length; i++) password += chars.charAt(Math.floor(Math.random() * chars.length));
                        showOutput(`<b>${password}</b> <button onclick="navigator.clipboard.writeText('${password}')" style="margin-left:10px; cursor:pointer;">‡§ï‡•â‡§™‡•Ä</button>`);
                        break;
                    }
                    case 'age-calculator': {
                        const birthDate = new Date(document.getElementById('birth-date').value);
                        if(isNaN(birthDate)) { alert('‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§π‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§ö‡•Å‡§®‡•á‡§Ç‡•§'); break; }
                        let age = new Date().getFullYear() - birthDate.getFullYear();
                        const m = new Date().getMonth() - birthDate.getMonth();
                        if (m < 0 || (m === 0 && new Date().getDate() < birthDate.getDate())) age--;
                        showOutput(`‡§Ü‡§™‡§ï‡•Ä ‡§â‡§Æ‡•ç‡§∞ ‡§≤‡§ó‡§≠‡§ó <b>${age}</b> ‡§∏‡§æ‡§≤ ‡§π‡•à‡•§`);
                        break;
                    }
                     case 'bmi-calculator': {
                        const weight = parseFloat(document.getElementById('bmi-weight').value);
                        const height = parseFloat(document.getElementById('bmi-height').value) / 100;
                        if(!weight || !height) { alert('‡§µ‡§ú‡§® ‡§î‡§∞ ‡§ä‡§Ç‡§ö‡§æ‡§à ‡§°‡§æ‡§≤‡•á‡§Ç‡•§'); break; }
                        const bmi = (weight / (height * height)).toFixed(2);
                        showOutput(`‡§Ü‡§™‡§ï‡§æ BMI <b>${bmi}</b> ‡§π‡•à‡•§`);
                        break;
                    }
                }
            } catch (e) {
                console.error(e);
                showOutput(`‡§è‡§ï ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à: ${e.message}`);
            } finally {
                if(toolId !== 'image-compressor') hideLoading();
            }
        });
        
        if (toolId === 'password-generator') {
            document.querySelectorAll('#pw-length, #pw-symbols, #pw-numbers').forEach(el => el.addEventListener('change', () => processBtn.click()));
            processBtn.click();
        }
        if (toolId === 'image-compressor') {
            document.getElementById('img-quality').addEventListener('input', e => document.getElementById('quality-val').textContent = e.target.value);
        }
    };
    
    // --- Start the application ---
    setupEventListeners();
});
</script>

</body>
</html>
